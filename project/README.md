# Программа динамического кодирования и декодирования данных по алгоритму Хаффмана с консольно-файловым интерфейсом и возможностью пошаговой демонстрации.

## Описание

Данный проект представляет собой консольно-файловое миниприложение, производящее динамическое кодирование и декодирование символьных данных 
по Хаффману с возможностью пошаговой демонстрации алгоритма. Программа предоставляет следующий функционал:

- Быстрое кодирование и декодирование символов прямо в терминале с возможностью отрисовки промежуточной демонстрации;
- Возможность чтения из файла текста для кодирования или же символьной последовательности из '0' и '1' для декодирования;
- Возможность печати результата работы алгоритма в файл (декодированного текста или закодированной символьной последовательности из '0' и '1');
- Возможность печати промежуточной пошаговой демонстрации алгоритма в файл;
- Возможность сжатия текстовой информации динамическим алгоритмом Хаффмана и записи сжатой последовательности бит в бинарный файл;
- Возможность чтения сжатой последовательности бит из бинарного файла с последующим декодированием;
- Возможность комбинации вышеперечисленных функций с помощью аргументов и опций командной строки (Command Line Interface);
- Печать статистики кодирования/декодирования: частоты символов в обработанном тексте, максимальной, минимальной и средней длины кода, процента сжатия;
- Возможность работы с расширенной кодировкой Unicode;
- Частичная кроссплатформенность: возможность компиляции исходного кода программы на операционных системах: Windows ($\geq 7$) и Linux (Ubuntu) с помощью компилятора g++ версии не ниже 6.

---
## Устройство проекта

Корневая папка проекта: Haffman-coder. В ней находится папка project с самим проектом.
В папке project содержится файл с описанием проекта README.md и следующие каталоги:

- source: исходные коды и заголовочные файлы для компиляции и линковки приложения, а также файлы автоматической сборки проекта:
    * Makefile: сборка на linux
    * make.bat: сборка на windows
    * Файл fullAlphabet содержит расширенную последовательность стандартных символов. Используется в качестве алфавита для кодировщика.
- executable: скомпилированные на соответствующих операционных системах исполняемые файлы:
    * HaffmanCoder.exe для windows
    * HaffmanCoder.out для linux.
- tests: тестовые текстовые файлы с информацией для кодирования.
- results: соответствующие тестовым файлам закодированные результаты в виде последовательности символов '0' и '1'.
- intermediaDatas: демонстрации кодирования, соответствующие тестовым данным.
- reverceIntermediaDatas: демонстрации декодирования, соответствующие результирующим закодированным данным.
- reports: отчеты о проделанной в рамках проекта работе.

---
## Особенности сборки проекта

Для компиляции и линковки следует использовать скрипты автоматической сборки:
- Makefile: для ОС linux
- make.bat: для ОС windows.

После успешной сборки в текущей директории сгенерируется исполняемый файл:
- HaffmanCoder.exe на windows
- HaffmanCoder.out на linux.

Скрипт автоматической сборки запускает его с опцией вызова инструкции по работе с программой.

Сборка производилась с помощью компилятора *mingw*:

	g++ (x86_64-win32-seh-rev2, Built by MinGW-W64 project) 12.2.0 	// windows
	g++ (Ubuntu 12.1.0-2ubuntu1~22.04) 12.1.0 			// linux

**Важно:** 
Программу следует компилировать на *mingw* версии $\geq 6$. При этом код содержит элементы нового 20 стандарта языка C++. 
Следует указать это в соответствующих ключах компиляции:

	-std=c++20.

---
## Особенности запуска приложения

Программа запускается в терминале и для управления использует аргументы и опции командной строки (формат Command Line Interface). 
Пример запуска программы:

	./HaffmanCoder.out --help

Кодировщик по Хаффману по умолчанию использует стандартный алфавит:

	abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.,!?:() 

При необходимости использования собственного алфавита для кодировщика программы следует разместить рядом с исполняемым файлом программы файл *alphabet* и прописать в нем подряд без разделителей набор символов для алфавита.
В данном случае программа при работе будет использовать алфавит из файла *alphabet*.

При некорректном использовании приложения в терминал будет выведено сообщение с информацией о соответствующей ошибке. 
При встрече нераспознанного символа (не присутствующего в алфавите) кодировщик остановит работу на этом символе.
При встрече нераспознанного бита (не '0' или '1') декодировщик также остановит работу на этом символе.
Сообщение об ошибке всегда пишется на консоль. Результат в файлы, как правило, при этом не запишется.

Бинарный файл с сжатым закодированным сообщением имеет уникальный формат для корректных чтения и записи: 
первые два байта - символы 'HC', третий байт - количество бит дополнения последнего байта сообщения (дополнение состоит из нулевых битов).
В случае встречи некорректного формата бинарного файла, приложение остановит работу с сообщением о соответствующей ошибке.

Все файлы, используемые как аргументы опций для работы программы, должны находится в директории исполняемого файла, или в любой другой директории.
В последнем случае в качестве аргументов - названий файлов - следует прописывать их полные пути от текущего или корневого каталога.
В случае некорректного названия файла, его отсутствия в указанной директории, отсутствия директории в пути, а также ошибок открытия файла 
для чтения или записи (например, в случае его использования другим приложением) программа прервет работу с информацией в консоли о соответствующей ошибке.

### Особенности кодировок:

Все файлы, используемые в работе приложения как текстовые файлы ввода, вывода символов исходной/закодированной информации,
а также демонстрации шагов алгоритма, должны быть оформлены в одной и той же кодировке:
- Для ОС linux - это стандартная кодировка UTF-8 ("ru_RU.UTF-8");
- Для ОС windows используется базовая кодировка Cyrillic Windows-1251 (windows1251) / ANSI (windows866). 

При этом в аналогичной файлам кодировке должна быть настроена и работать консоль системы. 
Для переключения кодировок в терминале windows применяется команда: *chcp 'code'*. Например:

	'chcp 65001'	// Unicode
	'chcp 866'	// ANSI

**Важно:** Отечественное приложение использует в качестве основного диалогового и демонстрационного языка - ***Русский***!

**Важно:** При работе приложения на ОС windows правильная интерпретация символов кодировки ***не гарантируется***!

---
## Инструкция по работе с приложением

	Исполняемый файл программы для запуска: ./HaffmanCoder.out
	Программа запускается с аргументами командной строки:
	    Первый главный аргумент - режим работы программы:
		'encoder' - использование кодировщика для кодирования сообщения;
		'decoder' - использование кодировщика для декодирования сообщения.

	    Далее поведение ввода и вывода данных для кодирования/декодирования определяется следующими опциями:
		-i/--in fileName - путь к файлу для чтения входных данных;
		-o/--out fileName - путь к файлу для записи выходных данных.
		При отсутствии вышеупомянутых опций считывание или запись будут производится в консоли. В этом случае программа в режиме диалога попросит ввести данные прямо в терминале.

		-d/--demo fileName - путь к файлу для вывода пошаговой демонстрации алгоритма кодировщика.
		При отсутствии имени файла вышеупомянутой опции вывод будет производится в консоль. При отсутствии самой опции вывод промежуточных данных не производится.
		При просмотре промежуточной демонстрации кодирования/декодирования в txt-файле рекомендуется установить в нем моноширный шрифт 'Consolas' для грамотной отрисовки деревьев.

		Опция -b/--binary означает запись или чтение закодированных сжатых данных в бинарный файл (из бинарного файла) в виде последовательности бит.
		При отсутствии данной опции закодированный код для чтения или записи определяется как последовательность символов '0' или '1'. Программа работает с обычными текстовыми файлами.

	Для вызова инструкции работы с программой используйте команду: './HaffmanCoder.out -h' или './HaffmanCoder.out --help'

Некорректное использование опций и аргументов командной строки (нераспозноваемые или лишние опции, отсутствие аргументов) приводит к сообщению в терминале о соответствующей ошибке.
